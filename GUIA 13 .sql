--CREACION DE USUARIO
CREATE PROFILE PROFILE_OWNER LIMIT
SESSIONS_PER_USER 1
FAILED_LOGIN_ATTEMPTS 10
PASSWORD_LIFE_TIME 120;

CREATE PROFILE PROFILE_DEVELOPER LIMIT
SESSIONS_PER_USER 2
CONNECT_TIME 240
IDLE_TIME 60
FAILED_LOGIN_ATTEMPTS 5
PASSWORD_LOCK_TIME 1
PASSWORD_LIFE_TIME 90;

CREATE PROFILE PROFILE_EXECUTION LIMIT
SESSIONS_PER_USER 3
CONNECT_TIME 120
IDLE_TIME 20
FAILED_LOGIN_ATTEMPTS 2
PASSWORD_LOCK_TIME 1
PASSWORD_LIFE_TIME 90
PASSWORD_GRACE_TIME 1;

CREATE ROLE ROL_DEVELOPER NOT IDENTIFIED;
CREATE ROLE ROL_TRANS_CLIENTE NOT IDENTIFIED;

GRANT CREATE SYNONYM TO ROL_DEVELOPER;
GRANT CREATE VIEW TO ROL_DEVELOPER;
GRANT CREATE ANY MATERIALIZED VIEW  TO ROL_DEVELOPER; 

CREATE USER MDY2131_P13_1 IDENTIFIED BY "MDY2131.practica_13_1"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_1 QUOTA UNLIMITED ON DATA;
GRANT CREATE SESSION TO MDY2131_P13_1;
GRANT "RESOURCE" TO MDY2131_P13_1;
GRANT CREATE SYNONYM TO MDY2131_P13_1;
ALTER USER MDY2131_P13_1 DEFAULT ROLE "RESOURCE";

CREATE USER MDY2131_P13_2 IDENTIFIED BY "MDY2131.practica_13_2"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
GRANT CREATE SESSION TO MDY2131_P13_2;
ALTER USER MDY2131_P13_2 QUOTA UNLIMITED ON DATA;
GRANT "ROL_DEVELOPER" TO MDY2131_P13_2;
ALTER USER MDY2131_P13_2 DEFAULT ROLE "ROL_DEVELOPER";

CREATE USER MDY2131_P13_3 IDENTIFIED BY "MDY2131.practica_13_3"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
GRANT CREATE SESSION TO MDY2131_P13_3;
ALTER USER MDY2131_P13_3 QUOTA UNLIMITED ON DATA;
GRANT "ROL_DEVELOPER" TO MDY2131_P13_3;
ALTER USER MDY2131_P13_3 DEFAULT ROLE "ROL_DEVELOPER";

CREATE USER MDY2131_P13_4 IDENTIFIED BY "MDY2131.practica_13_4"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_4 QUOTA UNLIMITED ON DATA;

CREATE USER MDY2131_P13_5 IDENTIFIED BY "MDY2131.practica_13_5"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_5 QUOTA UNLIMITED ON DATA;
GRANT "ROL_TRANS_CLIENTE" TO MDY2131_P13_5;
ALTER USER MDY2131_P13_5 DEFAULT ROLE "ROL_TRANS_CLIENTE";

CREATE USER MDY2131_P13_6 IDENTIFIED BY "MDY2131.practica_13_6"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_6 QUOTA UNLIMITED ON DATA;
GRANT "ROL_TRANS_CLIENTE" TO MDY2131_P13_6;
ALTER USER MDY2131_P13_6 DEFAULT ROLE "ROL_TRANS_CLIENTE";

--ASIGNACION DE PERMISOS
GRANT CREATE PROCEDURE TO ROL_DEVELOPER;
GRANT CREATE TRIGGER TO ROL_DEVELOPER;
GRANT CREATE VIEW TO ROL_DEVELOPER;
GRANT CREATE MATERIALIZED VIEW TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.CREDITO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.TIPO_CONTRATO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.REGION TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.PROVINCIA TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.COMUNA TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.PROFESION_OFICIO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.CLIENTE TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.PRODUCTO_INVERSION_CLIENTE TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.TIPO_MOVIMIENTO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.MOVIMIENTO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.CREDITO_CLIENTE TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.FORMA_PAGO TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.CUOTA_CREDITO_CLIENTE TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.SUCURSAL TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.APORTE_A_SBIF TO ROL_DEVELOPER;
GRANT SELECT ON MDY2131_P13_1.PRODUCTO_INVERSION TO ROL_DEVELOPER;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.CREDITO_CLIENTE TO ROL_DEVELOPER;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.PRODUCTO_INVERSION_CLIENTE TO ROL_DEVELOPER;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.CUOTA_CREDITO_CLIENTE TO ROL_DEVELOPER;

GRANT SELECT ON MDY2131_P13_1.TIPO_MOVIMIENTO TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.SUCURSAL TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.TIPO_CONTRATO TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.CLIENTE TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.REGION TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.PROVINCIA TO MDY2131_P13_4;
GRANT SELECT ON MDY2131_P13_1.COMUNA TO MDY2131_P13_4;

GRANT SELECT ON MDY2131_P13_1.CLIENTE TO ROL_TRANS_CLIENTE;
GRANT SELECT ON MDY2131_P13_1.REGION TO ROL_TRANS_CLIENTE;
GRANT SELECT ON MDY2131_P13_1.PROVINCIA TO ROL_TRANS_CLIENTE;
GRANT SELECT ON MDY2131_P13_1.COMUNA TO ROL_TRANS_CLIENTE;

--CREACION DE SINONIMOS
CREATE SYNONYM MDY2131_P13_2.SYN_T_CONT FOR MDY2131_P13_1.TIPO_CONTRATO;
CREATE SYNONYM MDY2131_P13_2.SYN_R FOR MDY2131_P13_1.REGION;
CREATE SYNONYM MDY2131_P13_2.SYN_P FOR MDY2131_P13_1.PROVINCIA;
CREATE SYNONYM MDY2131_P13_2.SYN_CO FOR MDY2131_P13_1.COMUNA;
CREATE SYNONYM MDY2131_P13_2.SYN_PROF_OF FOR MDY2131_P13_1.PROFESION_OFICIO;
CREATE SYNONYM MDY2131_P13_2.SYN_C FOR MDY2131_P13_1.CLIENTE;
CREATE SYNONYM MDY2131_P13_2.SYN_PROD_INV_CLI FOR MDY2131_P13_1.PRODUCTO_INVERSION_CLIENTE;
CREATE SYNONYM MDY2131_P13_2.SYN_T_MOV FOR MDY2131_P13_1.TIPO_MOVIMIENTO;
CREATE SYNONYM MDY2131_P13_2.SYN_MOV FOR MDY2131_P13_1.MOVIMIENTO;
CREATE SYNONYM MDY2131_P13_2.SYN_CC FOR MDY2131_P13_1.CREDITO_CLIENTE;
CREATE SYNONYM MDY2131_P13_2.SYN_F_PAGO FOR MDY2131_P13_1.FORMA_PAGO;
CREATE SYNONYM MDY2131_P13_2.SYN_CT_CRED_CLI FOR MDY2131_P13_1.CUOTA_CREDITO_CLIENTE;
CREATE SYNONYM MDY2131_P13_2.SYN_SUC FOR MDY2131_P13_1.SUCURSAL;
CREATE SYNONYM MDY2131_P13_2.SYN_A_SBIF FOR MDY2131_P13_1.APORTE_A_SBIF;
CREATE SYNONYM MDY2131_P13_2.SYN_PROD_INV FOR MDY2131_P13_1.PRODUCTO_INVERSION;

CREATE SYNONYM MDY2131_P13_3.SYN_CRED FOR MDY2131_P13_1.CREDITO;
CREATE SYNONYM MDY2131_P13_3.SYN_T_CONT FOR MDY2131_P13_1.TIPO_CONTRATO;
CREATE SYNONYM MDY2131_P13_3.SYN_R FOR MDY2131_P13_1.REGION;
CREATE SYNONYM MDY2131_P13_3.SYN_P FOR MDY2131_P13_1.PROVINCIA;
CREATE SYNONYM MDY2131_P13_3.SYN_CO FOR MDY2131_P13_1.COMUNA;
CREATE SYNONYM MDY2131_P13_3.SYN_PROF_OF FOR MDY2131_P13_1.PROFESION_OFICIO;
CREATE SYNONYM MDY2131_P13_3.SYN_C FOR MDY2131_P13_1.CLIENTE;
CREATE SYNONYM MDY2131_P13_3.SYN_PROD_INV_CLI FOR MDY2131_P13_1.PRODUCTO_INVERSION_CLIENTE;
CREATE SYNONYM MDY2131_P13_3.SYN_T_MOV FOR MDY2131_P13_1.TIPO_MOVIMIENTO;
CREATE SYNONYM MDY2131_P13_3.SYN_MOV FOR MDY2131_P13_1.MOVIMIENTO;
CREATE SYNONYM MDY2131_P13_3.SYN_CC FOR MDY2131_P13_1.CREDITO_CLIENTE;
CREATE SYNONYM MDY2131_P13_3.SYN_F_PAGO FOR MDY2131_P13_1.FORMA_PAGO;
CREATE SYNONYM MDY2131_P13_3.SYN_CT_CRED_CLI FOR MDY2131_P13_1.CUOTA_CREDITO_CLIENTE;
CREATE SYNONYM MDY2131_P13_3.SYN_SUC FOR MDY2131_P13_1.SUCURSAL;
CREATE SYNONYM MDY2131_P13_3.SYN_A_SBIF FOR MDY2131_P13_1.APORTE_A_SBIF;
CREATE SYNONYM MDY2131_P13_3.SYN_PROD_INV FOR MDY2131_P13_1.PRODUCTO_INVERSION;
